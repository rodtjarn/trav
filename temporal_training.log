2026-01-10 23:34:56,498 - INFO - ================================================================================
2026-01-10 23:34:56,498 - INFO - TEMPORAL MODEL TRAINING - NO DATA LEAKAGE
2026-01-10 23:34:56,498 - INFO - ================================================================================
2026-01-10 23:34:56,498 - INFO - 
Loading temporal processed data...
2026-01-10 23:34:58,655 - INFO - 
Selected 224 features:
2026-01-10 23:34:58,655 - INFO -   - condition_light
2026-01-10 23:34:58,655 - INFO -   - condition_nan
2026-01-10 23:34:58,655 - INFO -   - day_of_week
2026-01-10 23:34:58,655 - INFO -   - distance
2026-01-10 23:34:58,655 - INFO -   - distance_handicap
2026-01-10 23:34:58,655 - INFO -   - driver_earnings
2026-01-10 23:34:58,655 - INFO -   - driver_second
2026-01-10 23:34:58,655 - INFO -   - driver_starts
2026-01-10 23:34:58,655 - INFO -   - driver_third
2026-01-10 23:34:58,655 - INFO -   - driver_top3_rate
2026-01-10 23:34:58,655 - INFO -   ... and 214 more
2026-01-10 23:34:58,907 - INFO - 
================================================================================
2026-01-10 23:34:58,907 - INFO - TEMPORAL SPLIT
2026-01-10 23:34:58,907 - INFO - ================================================================================
2026-01-10 23:34:58,916 - INFO - Training:   2025-01-01 to 2025-10-31
2026-01-10 23:34:58,916 - INFO -             180,012 samples, 16,854 winners (9.4%)
2026-01-10 23:34:58,918 - INFO - 
Testing:    2025-11-01 to 2025-12-31
2026-01-10 23:34:58,918 - INFO -             35,027 samples, 3,127 winners (8.9%)
2026-01-10 23:34:58,918 - INFO - 
================================================================================
2026-01-10 23:34:58,918 - INFO - APPLYING SMOTE
2026-01-10 23:34:58,918 - INFO - ================================================================================
2026-01-10 23:34:58,918 - INFO - Before SMOTE: 180,012 samples
2026-01-10 23:34:58,918 - INFO -   Winners: 16,854 (9.4%)
2026-01-10 23:35:01,126 - INFO - 
After SMOTE: 326,316 samples
2026-01-10 23:35:01,126 - INFO -   Winners: 163,158 (50.0%)
2026-01-10 23:35:01,126 - INFO - 
================================================================================
2026-01-10 23:35:01,126 - INFO - TRAINING RANDOM FOREST
2026-01-10 23:35:01,126 - INFO - ================================================================================
2026-01-10 23:35:01,126 - INFO - Parameters: {'n_estimators': 100, 'max_depth': 20, 'min_samples_split': 10, 'min_samples_leaf': 4, 'random_state': 42, 'n_jobs': -1, 'class_weight': 'balanced'}
2026-01-10 23:35:07,252 - INFO - ✓ Training complete!
2026-01-10 23:35:07,252 - INFO - 
================================================================================
2026-01-10 23:35:07,252 - INFO - MODEL EVALUATION - TEMPORAL TEST SET
2026-01-10 23:35:07,252 - INFO - ================================================================================
2026-01-10 23:35:07,380 - INFO - 
Accuracy: 0.8814
2026-01-10 23:35:07,380 - INFO - ROC-AUC:  0.6058
2026-01-10 23:35:07,380 - INFO - 
Classification Report:
2026-01-10 23:35:07,386 - INFO - 
Confusion Matrix:
2026-01-10 23:35:07,386 - INFO -   True Negatives:  30,642
2026-01-10 23:35:07,386 - INFO -   False Positives: 1,258
2026-01-10 23:35:07,386 - INFO -   False Negatives: 2,897
2026-01-10 23:35:07,386 - INFO -   True Positives:  230
2026-01-10 23:35:07,386 - INFO - 
================================================================================
2026-01-10 23:35:07,386 - INFO - PER-RACE PREDICTION ACCURACY
2026-01-10 23:35:07,386 - INFO - ================================================================================
2026-01-10 23:35:08,023 - INFO - 
Races with correct winner prediction: 566/3118 (18.2%)
2026-01-10 23:35:08,023 - INFO - This is the REALISTIC win rate for betting on top model picks
2026-01-10 23:35:08,026 - INFO - 
================================================================================
2026-01-10 23:35:08,026 - INFO - TOP 20 MOST IMPORTANT FEATURES
2026-01-10 23:35:08,026 - INFO - ================================================================================
2026-01-10 23:35:08,039 - INFO -   post_position                      : 0.0722
2026-01-10 23:35:08,039 - INFO -   record_time                        : 0.0632
2026-01-10 23:35:08,039 - INFO -   is_outside_post                    : 0.0579
2026-01-10 23:35:08,039 - INFO -   start_volte                        : 0.0576
2026-01-10 23:35:08,039 - INFO -   start_auto                         : 0.0552
2026-01-10 23:35:08,039 - INFO -   distance                           : 0.0495
2026-01-10 23:35:08,039 - INFO -   horses_in_race                     : 0.0439
2026-01-10 23:35:08,039 - INFO -   position_ratio                     : 0.0426
2026-01-10 23:35:08,039 - INFO -   distance_handicap                  : 0.0402
2026-01-10 23:35:08,039 - INFO -   record_speed_kmmin                 : 0.0350
2026-01-10 23:35:08,039 - INFO -   start_number                       : 0.0319
2026-01-10 23:35:08,040 - INFO -   is_inside_post                     : 0.0295
2026-01-10 23:35:08,040 - INFO -   horse_age                          : 0.0270
2026-01-10 23:35:08,040 - INFO -   horse_recent_starts                : 0.0229
2026-01-10 23:35:08,040 - INFO -   trainer_win_rate                   : 0.0185
2026-01-10 23:35:08,040 - INFO -   horse_money                        : 0.0176
2026-01-10 23:35:08,040 - INFO -   trainer_win_percentage             : 0.0167
2026-01-10 23:35:08,040 - INFO -   trainer_top3_rate                  : 0.0167
2026-01-10 23:35:08,040 - INFO -   horse_days_since_last_race         : 0.0164
2026-01-10 23:35:08,040 - INFO -   horse_recent_avg_position          : 0.0164
2026-01-10 23:35:08,109 - INFO - 
✓ Model saved to temporal_rf_model.pkl
2026-01-10 23:35:08,109 - INFO - ✓ Metadata saved to temporal_rf_metadata.json
2026-01-10 23:35:08,109 - INFO - 
================================================================================
2026-01-10 23:35:08,109 - INFO - ✓ TRAINING COMPLETE!
2026-01-10 23:35:08,109 - INFO - ================================================================================
2026-01-10 23:35:08,109 - INFO - 
Model trained with PROPER temporal validation
2026-01-10 23:35:08,109 - INFO - Per-race accuracy (realistic win rate): 18.2%
              precision    recall  f1-score   support

  Not Winner       0.91      0.96      0.94     31900
      Winner       0.15      0.07      0.10      3127

    accuracy                           0.88     35027
   macro avg       0.53      0.52      0.52     35027
weighted avg       0.85      0.88      0.86     35027

